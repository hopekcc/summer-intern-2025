{% extends "base.html" %}

{% block title %}PlaylistMaker - HOPEKCC Chord Pro Tool{% endblock %}

{% block head %}
    <!-- Playlist-specific styles inline to reduce clutter in main CSS file -->
    <style>
        /* Playlist-specific styles (restored old UI) */
        .main-content { padding: 2rem 0; }
        .grid { display: grid; grid-template-columns: 1fr 400px; gap: 2rem; }
        .hero { text-align: center; margin-bottom: 2rem; }
        .hero h2 { color: #2b2f78; font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; }
        .hero p { color: #64748b; font-size: 1.125rem; }
        .card { background: white; border-radius: .75rem; box-shadow: 0 1px 3px rgba(0,0,0,.1); padding: 1.5rem; margin-bottom: 1.5rem; }
        .search-card { border: 2px solid #e2e8f0; }
        .search-controls { margin-bottom: 1rem; }
        .search-input-wrapper { position: relative; margin-bottom: 1rem; display: flex; align-items: center; }
        .search-icon { position: absolute; left: .75rem; top: 50%; transform: translateY(-50%); width: 1.25rem; height: 1.25rem; color: #64748b; }
        .search-input { width: 100%; padding: .75rem .75rem .75rem 2.5rem; border: 2px solid #e2e8f0; border-radius: .5rem; font-size: 1rem; transition: border-color .2s; }
        .search-input:focus { outline: none; border-color: #2b2f78; }
        #searchButton { margin-left: .5rem; white-space: nowrap; }
        .search-tabs { display: flex; gap: .5rem; margin-top: .5rem; }
        .tab-btn { padding: .5rem 1rem; border: 2px solid #e2e8f0; background: white; border-radius: .5rem; cursor: pointer; transition: all .2s; font-weight: 500; }
        .tab-btn.active { background: #2b2f78; color: white; border-color: #2b2f78; }
        .tab-btn:hover:not(.active) { border-color: #2b2f78; color: #2b2f78; }
        .tracks-section h3 { color: #2b2f78; font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem; }
        .tracks-list { display: flex; flex-direction: column; gap: 1rem; }
        .track-card { padding: 1rem; transition: transform .2s, box-shadow .2s; }
        .track-card:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,.15); }
        .track-content { display: flex; align-items: center; gap: 1rem; }
        .track-info { flex: 1; }
        .track-title { font-weight: 600; color: #1e293b; margin-bottom: .25rem; }
        .track-artist { color: #64748b; margin-bottom: .5rem; }
        .badge { background: #f1f5f9; color: #475569; padding: .25rem .5rem; border-radius: .25rem; font-size: .75rem; font-weight: 500; }
        .track-actions { display: flex; align-items: center; gap: .5rem; }
        .btn-primary { background: #2b2f78; color: white; border: none; padding: .5rem 1rem; border-radius: .5rem; cursor: pointer; font-weight: 500; transition: background-color .2s; }
        .btn-primary:hover { background: #1e2563; }
        .playlist-section { position: sticky; top: 2rem; height: fit-content; }
        .playlist-card { border: 2px solid #2b2f78; }
        .playlist-header { margin-bottom: 1.5rem; }
        .label { display: block; color: #374151; font-weight: 500; margin-bottom: .5rem; }
        .playlist-name-input { width: 100%; padding: .75rem; border: 2px solid #e2e8f0; border-radius: .5rem; font-size: 1rem; font-weight: 600; }
        .playlist-name-input:focus { outline: none; border-color: #2b2f78; }
        .playlist-title-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
        .badge-outline { border: 1px solid #2b2f78; color: #2b2f78; padding: .25rem .5rem; border-radius: .25rem; font-size: .75rem; font-weight: 500; }
        .playlist-content { min-height: 200px; margin-bottom: 1.5rem; }
        .empty-playlist { text-align: center; padding: 2rem 1rem; color: #64748b; }
        .empty-icon { width: 3rem; height: 3rem; margin: 0 auto 1rem; opacity: .5; }
        .empty-subtitle { font-size: .875rem; margin-top: .5rem; }
        .playlist-actions { border-top: 1px solid #e2e8f0; padding-top: 1rem; }
        .save-btn { width: 100%; justify-content: center; margin-bottom: .75rem; }
        .hidden { display: none; }
        .search-results { border-top: 1px solid #e2e8f0; padding-top: 1rem; margin-top: 1rem; }
        @media (max-width: 768px) {
          .grid { grid-template-columns: 1fr; }
          .playlist-section { position: static; }
        }
    </style>
{% endblock %}

{% block content %}
<div class="container main-content">
  <div class="grid">
    <!-- Search Section -->
    <div class="search-section">
      <div class="hero">
        <h2>Discover Your Next Favorite Track</h2>
        <p>Search through thousands of tracks by title, artist, or ID to create the perfect playlist.</p>
      </div>
      <div class="card search-card">
        <div class="search-controls">
          <div class="search-input-wrapper">
            <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
            </svg>
            <input id="searchInput" class="search-input" placeholder="Search by titleâ€¦" />
            <button id="searchButton" class="btn-primary">Search</button>
          </div>
          <div class="search-tabs">
            <button class="tab-btn active" data-type="title">Title</button>
            <button class="tab-btn" data-type="artist">Artist</button>
            <button class="tab-btn" data-type="id">ID</button>
          </div>
        </div>
        <div id="searchResults" class="search-results hidden"></div>
      </div>

      <div class="tracks-section">
        <h3>Browse Tracks</h3>
        <div id="tracksList" class="tracks-list">
          {% for track in tracks %}
          <div class="card track-card" data-track-id="{{ track.id }}">
            <div class="track-content">
              <div class="track-info">
                <h4 class="track-title">{{ track.title }}</h4>
                <p class="track-artist">{{ track.artist }}</p>
                <span class="badge">{{ track.id }}</span>
              </div>
              <div class="track-actions">
                <button class="btn-primary add-btn" data-track='{{ track|tojson }}'>Add</button>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>

    <!-- Playlist Section -->
    <div class="playlist-section">
      <div class="card playlist-card">
        <div class="playlist-header">
          <label class="label" for="playlistName">Playlist Name</label>
          <input id="playlistName" class="playlist-name-input" value="My New Playlist" />
        </div>
        <div class="playlist-title-row">
          <h3>Current Playlist</h3>
          <span id="trackCount" class="badge-outline">0 tracks</span>
        </div>
        <div id="playlistContent" class="playlist-content">
          <div class="empty-playlist">
            <svg class="empty-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/>
            </svg>
            <p>No tracks added yet</p>
            <p class="empty-subtitle">Search and add tracks to get started</p>
          </div>
        </div>
        <div id="playlistActions" class="playlist-actions hidden">
          <button class="btn-primary save-btn">Save Playlist</button>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script type="module" src="{{ url_for('static', filename='js/playlist.js') }}"></script>
{% endblock %}
